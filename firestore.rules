rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Default deny all reads and writes
    match /{document=**} {
      allow read, write: if false;
    }

    // Allow anyone to read products, blog posts, and events.
    // This is necessary for the public-facing pages of the website.
    // Write access is denied to prevent unauthorized modification from the client-side.
    // All data modifications should happen through trusted server-side code (e.g., Server Actions).
    match /products/{productId} {
      allow read: if true;
      allow write: if false;
    }

    match /blog/{postId} {
      allow read: if true;
      allow write: if false;
    }

    match /events/{eventId} {
      allow read: if true;
      allow write: if false;
    }

    // Secure the users collection.
    // In this mock setup, all user creation and retrieval is handled server-side
    // during the login process, which bypasses these client-side rules.
    // Direct client access is denied.
    match /users/{userId} {
      allow read, write: if false;
    }
  }
}
